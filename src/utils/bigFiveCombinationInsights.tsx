export const bigFiveCombinationInsights: Record<string, Record<string, Record<string, string>>> = {
  Imagination: {
    Extraversion: {
      low: `You're an independent thinker who prefers to explore bold ideas on your own terms. Your creativity thrives in solitude, where reflection fuels innovation.`,
      medium: `You strike a balance between introspection and engagement. Your imaginative thinking is supported by a thoughtful approach to interaction, making you quietly influential.`,
      high: `You pair creative energy with social energy — a rare mix that lets you inspire others with your ideas and bring them to life through dynamic collaboration.`
    },
    Agreeableness: {
      low: `You're willing to challenge consensus if it means pursuing a breakthrough idea. Your creative edge is sharpened by independent thought, even when it goes against the grain.`,
      medium: `You bring ideas forward in ways that resonate. Your openness to new thinking, combined with a collaborative spirit, helps others come along for the ride.`,
      high: `You're a visionary who builds bridges. Your creativity is matched by deep empathy — making you someone who can reimagine possibilities while keeping people aligned.`
    },
    Conscientiousness: {
      low: `You generate ideas quickly and easily, but may resist structure. When you do pair your creativity with focus, you unlock powerful innovation.`,
      medium: `You have the ability to dream big and follow through. Your mix of originality and discipline means your ideas don't just stay in the clouds — they land.`,
      high: `You're both imaginative and meticulous — a rare combination. You not only think outside the box, you map the steps to get there and make it happen.`
    },
    "Emotional Stability": {
      low: `Your emotional intensity fuels your creativity, though it may also lead to overthinking. Harnessing calm alongside your ideas helps bring clarity to complexity.`,
      medium: `You balance emotional sensitivity with creative thinking. Your ability to stay grounded while exploring new ideas makes you a steady source of innovation.`,
      high: `Your creative thinking is steady, not chaotic. You stay composed under pressure, giving your imaginative ideas the structure and clarity they need to succeed.`
    }
  },

  Extraversion: {
    Conscientiousness: {
      low: `You bring energy and enthusiasm to the group, but with a more spontaneous, less structured approach. While you thrive in fast-moving situations, building consistency in your process will amplify your influence.`,
      medium: `You balance your outgoing nature with a reasonable level of focus and follow-through. This makes you great at both rallying people and staying on track — a valuable mix for collaborative environments.`,
      high: `You're a powerhouse of both drive and discipline. People likely look to you to lead, motivate, and execute. Just watch for burnout or impatience when others don't move at your pace.`
    },
    Agreeableness: {
      low: `You're bold and assertive, unafraid to speak up or take the lead — but you may sometimes miss social cues or overstep. Taking time to build rapport can make your presence more persuasive.`,
      medium: `You combine sociability with a reasonable sense of harmony. You're good at managing group dynamics, speaking up while still considering others' perspectives.`,
      high: `You're highly engaging, warm, and tuned into people's needs — a natural connector. Your ability to rally people and make them feel seen is a major strength in team settings.`
    },
    Imagination: {
      low: `You're focused, pragmatic, and likely action-oriented — preferring what's proven over what's possible. While this grounds your energy, exploring new approaches might expand your toolkit.`,
      medium: `You're sociable and open-minded, comfortable trying new things and connecting with a wide range of people. You likely enjoy dynamic conversations and collaborative brainstorming.`,
      high: `You bring boldness and creativity together. You thrive in visionary spaces, love big ideas, and energize others with your future-focused thinking. Just remember to loop in practical voices too.`
    },
    "Emotional Stability": {
      low: `You're energetic and expressive, but your mood may fluctuate based on what's happening around you. When stressed, your enthusiasm might shift to frustration — a calm sounding board helps.`,
      medium: `You stay fairly steady under pressure while still bringing warmth and momentum to the room. This makes you approachable and resilient — especially in team settings.`,
      high: `You're a grounded optimist — calm, positive, and unshaken by stress. People may rely on your steadiness in uncertain moments. Be mindful not to dismiss others' emotional responses.`
    }
  },

  Agreeableness: {
    Conscientiousness: {
      low: `You're easygoing and friendly, but may avoid structure or deadlines. This combination brings warmth to a team, but can benefit from setting clear priorities to avoid being spread too thin.`,
      medium: `You combine a cooperative spirit with a sense of responsibility. You're likely dependable without being rigid, making you someone people trust and enjoy working with.`,
      high: `You are reliable, kind, and always thinking about how your work affects others. People see you as someone who keeps commitments and creates a positive, respectful atmosphere.`
    },
    Extraversion: {
      low: `You may be sociable and expressive, but prefer to lead with honesty over harmony. You're not afraid to challenge ideas, which can drive progress — just be mindful of how your style lands with others.`,
      medium: `You strike a strong balance — open to others, quick to engage, and skilled at building rapport. People tend to feel comfortable around you, and you know when to speak up and when to listen.`,
      high: `You're a natural connector — warm, energetic, and highly tuned in to others. You likely excel in roles that require trust-building, diplomacy, and group collaboration.`
    },
    Imagination: {
      low: `You might be warm and considerate, but prefer familiar routines and clear expectations. This makes you steady and approachable, though you may need a nudge when it comes to change or abstract ideas.`,
      medium: `You're both thoughtful and open-minded — curious about others' perspectives and comfortable navigating new territory. This makes you a great collaborator, especially when working through complex decisions.`,
      high: `You're open, empathetic, and curious — someone who brings emotional intelligence and expansive thinking to a group. You thrive in inclusive spaces where people feel safe to explore ideas together.`
    },
    "Emotional Stability": {
      low: `You're sensitive to both your emotions and those of others. While this makes you deeply compassionate, it may also leave you drained in tense environments. Prioritizing boundaries can help protect your energy.`,
      medium: `You care about people and handle pressure reasonably well. This balanced profile helps you stay grounded while still tuning into group dynamics, making you a steadying influence in teams.`,
      high: `You're calm, kind, and unshakably fair. People probably see you as the "emotional anchor" — someone who keeps cool under pressure and helps resolve conflict with grace.`
    }
  },

  Conscientiousness: {
    Imagination: {
      low: `You're focused, practical, and thrive with clear steps and structure — but you may resist change or abstract ideas. Partnering with imaginative thinkers can stretch your perspective.`,
      medium: `You bring a steady mix of structure and creativity. You're able to stay grounded while exploring new approaches — a valuable trait in dynamic environments.`,
      high: `You pair vision with precision — a powerful combination. Just watch that perfectionism or overplanning doesn't get in the way of innovation.`
    },
    Extraversion: {
      low: `You're measured, thoughtful, and self-reliant — someone who plans carefully and avoids rushing. In groups, your quiet diligence ensures nothing falls through the cracks.`,
      medium: `You balance structured follow-through with a healthy dose of sociability. You likely get things done and bring others along with you.`,
      high: `You bring energy and order in equal parts — a take-charge personality who thrives on leading initiatives. Just remember that quieter voices may offer value too.`
    },
    Agreeableness: {
      low: `You're task-focused and results-oriented, but may prioritize goals over harmony. This directness can be effective — as long as it's paired with awareness of others' input.`,
      medium: `You can be both reliable and collaborative — a steady contributor who helps teams stay on track without pushing too hard.`,
      high: `You're a dependable, thoughtful team player. People know they can trust you — though you may hesitate to challenge ideas or push back when needed.`
    },
    "Emotional Stability": {
      low: `You hold yourself to high standards and may struggle when things feel chaotic or uncertain. Building habits that support calm under pressure will enhance your consistency.`,
      medium: `You manage stress well while staying organized and dependable — a useful balance when navigating complex tasks.`,
      high: `You're a rock. Focused, stable, and unflappable under pressure. Just be mindful not to overlook emotional cues in others while staying on task.`
    }
  },

  "Emotional Stability": {
    Imagination: {
      low: `You may find change and ambiguity uncomfortable, especially under stress. Building small habits that foster curiosity can help you grow confidence in uncertain situations.`,
      medium: `You bring a thoughtful balance — open to new ideas, but steady when things get tough. This makes you especially valuable in environments that require calm innovation.`,
      high: `You're calm and creative — a combination that thrives in complexity. You likely bring fresh ideas without being rattled by chaos, which makes you a stabilizing force in high-change environments.`
    },
    Extraversion: {
      low: `You may feel easily overstimulated by social settings or conflict. Creating space to recharge and build emotional resilience can help you stay present and assertive when needed.`,
      medium: `You're sociable but self-aware, managing interactions without being thrown off by tension. A great combination for navigating team dynamics and difficult conversations.`,
      high: `You're confident, composed, and thrive around others. You likely bring energy without drama and stay grounded even in fast-paced or high-pressure environments.`
    },
    Agreeableness: {
      low: `You may find it difficult to manage stress in relationships or handle emotional friction. Developing stronger self-awareness and empathy will improve collaboration and trust.`,
      medium: `You balance emotional steadiness with a concern for others — a reliable teammate who can handle disagreement without overreacting.`,
      high: `You're calm, compassionate, and unshaken by tension — someone people rely on to keep teams grounded and relationships steady.`
    },
    Conscientiousness: {
      low: `You hold yourself to high standards and may struggle when things feel chaotic or uncertain. Building habits that support calm under pressure will enhance your consistency.`,
      medium: `You manage stress well while staying organized and dependable — a useful balance when navigating complex tasks.`,
      high: `You're a rock. Focused, stable, and unflappable under pressure. Just be mindful not to overlook emotional cues in others while staying on task.`
    }
  }
};

/**
 * Get the score category for Big Five traits
 */
const getBigFiveScoreCategory = (score: number): 'high' | 'medium' | 'low' => {
  if (score >= 70) return 'high';
  if (score >= 35) return 'medium';
  return 'low';
};

/**
 * Find the most contrasting trait (highest difference from the top trait)
 */
const findMostContrastingTrait = (traitScores: Record<string, number>, topTrait: string): string => {
  const topScore = traitScores[topTrait];
  let mostContrastingTrait = '';
  let largestDifference = -1;

  Object.entries(traitScores).forEach(([trait, score]) => {
    if (trait !== topTrait) {
      const difference = topScore - score;
      if (difference > largestDifference) {
        largestDifference = difference;
        mostContrastingTrait = trait;
      }
    }
  });

  return mostContrastingTrait;
};

/**
 * Get Big Five combination insight based on smart prioritization logic
 * @param traitScores - Object with Big Five trait scores
 * @returns The dynamic insight text for the most distinct pairing
 */
export const getBigFiveCombinationInsight = (traitScores: Record<string, number>): string => {
  // Find highest scoring trait
  const topTrait = Object.entries(traitScores)
    .sort(([, scoreA], [, scoreB]) => scoreB - scoreA)[0]?.[0];

  if (!topTrait) {
    return 'Unable to determine trait combination.';
  }

  // Find most contrasting trait (largest difference)
  const contrastingTrait = findMostContrastingTrait(traitScores, topTrait);
  
  if (!contrastingTrait) {
    return 'Unable to determine contrasting trait.';
  }

  // Get score category of the contrasting trait
  const contrastingScore = traitScores[contrastingTrait];
  const scoreCategory = getBigFiveScoreCategory(contrastingScore);

  // Get the insight
  const insight = bigFiveCombinationInsights[topTrait]?.[contrastingTrait]?.[scoreCategory];
  
  if (insight) {
    return insight;
  }

  return ``;
};
